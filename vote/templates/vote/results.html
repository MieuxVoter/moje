{% extends 'base_page.html' %}
{% load static %}



{% block panel-header %}
<div class="panel-header">
    <div class="header text-center">
        <h2 class="title">Résultats du vote</h2>
    </div>
</div>
{% endblock panel-header %}



{% block content %}
<div class="content">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">Les résultats</h4>
                </div>
                <div class="card-body">
                    <div class="alert alert-info alert-with-icon" data-notify="container">
                        <button type="button" aria-hidden="true" class="close">
                            <i class="now-ui-icons ui-1_simple-remove"></i>
                        </button>
                        <span data-notify="icon" class="now-ui-icons ui-1_bell-53"></span>
                        <span data-notify="message">{{ nvotes }} votes ont été enregistrés !</span>
                    </div>

                    <!-- <div class="alert alert-warning">
                        <button type="button" aria-hidden="true" class="close">
                            <i class="now-ui-icons ui-1_simple-remove"></i>
                        </button>
                        <span>
                            <b> Attention - </b> Le vote se terminera dans 5 jours !</span>
                    </div> -->

                    <p>
                    <img src="/mj/charts/results-{{ election_id }}.png" alt="Results from Majority Judgment" />
                    </p>

                </div>
            </div>
        </div>

        <!-- display vote details -->
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">Le détail des votes</h4>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead class=" text-primary">
                                <tr>
                                    <th>Rang</th>
                                    <th>Nom</th>
                                {% for grade in grades %}
                                <th>
                                    {{ grade }}
                                </th>
                                {% endfor %}
                                <th class="text-right">Mention médiane</th>
                            </tr></thead>
                            <tbody>
                                {% for candidate in ranking  %}
                                <tr>
                                    <td>{{ forloop.counter }}. </td>
                                    <td>
                                        {{ candidate.user.first_name | title}} {{ candidate.user.last_name | title}}
                                    </td>
                                    {% for rating in candidate.ratings %}
                                    <td>
                                        {{ rating }}
                                    </td>
                                    {% endfor %}
                                    <td class="text-right">
                                        {{ candidate.median  }}
                                    </td>

                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
        </div>
        <!-- end display vote details -->

    </div>
<!-- end content -->
</div>



{% endblock content %}
